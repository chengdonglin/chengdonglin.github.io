---
title: 策略模式
date: 2018-10-30 14:56:47
tags:
	- 导航
    - ES6
    - 设计模式
categories: 设计模式
---

## 策略模式

定义的一组算法封装起来,使其相互之间可以替换,不会随客服端的变化而变化

###  场景

1. jquery的动画
2. 表单验证
3. 不同类别的奖金额度等等

### 代码实现
    
    let inputStrategy = function(){
    let strategy = {
    notNull: function(value) {
    return /\s+/.test(value) ? '请输入内容' : ''
    },
    number : function(value){
    return /^[0-9]+(\.[0-9]+)?$/.test(value) ? '' : '请输入数字'
    },
    phone:function(value){
    return /^\d{3}\-d{8}$|^\d{4}\-d{7}$/.test(value) ? ' ' : 请输入正确的电话号码格式,如010-12345678
    }
    }
    return {
    //验证接口type算法value表单值
    check:function(type,value) {
    value = value.replace(/^\s+|\s+$/g,'')
    return strategy[type] ? strategy[type](value): '没有该类型的检测方法'
    },
    //添加策略
    addStrategy:function(type,fn){
    strategy[type] = fn
    }
    }
    }() //加括号
    
    //算法扩展
    inputStrategy.addStrategy('nickname',function(value){
    return /^[a-zA-Z]\w{3,7}$/.test(value) ? '' : '请输入4-8位昵称'
    })
    
    //验证
    const  value = '123给456'
    console.log(inputStrategy.check('number',value))